import{B as E,l as p,d as S,r as _,f as B,y as K,c as N,b as t,j as a,e as O,m as f,F as T,z as I,A as h,h as V,a as c,o as P}from"./index-D6QYwPHy.js";import{b as D,m as J,_ as j}from"./tres3d.vue_vue_type_script_setup_true_lang-CsEOyfGQ.js";import{e as g}from"./tres3d.vue_vue_type_style_index_0_lang-CTMRHt9u.js";const q=E("ModuleStore",{actions:{add_Module(s){const r=["name","lx","ly","lz","x","y","z"];for(const z of r)if(!s.hasOwnProperty(z)){p({title:"error",message:`输入对象缺少 ${z} 属性`});return}if(typeof s.name!="string"){p({title:"error",message:"name 属性必须是字符串类型"});return}if(typeof s.lx!="number"||typeof s.ly!="number"||typeof s.lz!="number"||typeof s.x!="number"||typeof s.y!="number"||typeof s.z!="number"){p({title:"error",message:"lx, ly, lz 和 xyz 属性必须是数字类型"});return}this.Module_list.push(s),p({message:`模块${s.name}信息添加成功`})}},state(){return{Module_list:JSON.parse(localStorage.getItem("Module_list"))||[{name:"AAU第一层",lx:318,ly:224,lz:10,x:80,y:0,z:0},{name:"AAU第二层",lx:338,ly:224,lz:20,x:70,y:0,z:10},{name:"AAU第三层",lx:378,ly:224,lz:20,x:50,y:0,z:30},{name:"AAU第四层",lx:418,ly:224,lz:30,x:30,y:0,z:50},{name:"AAU第五层",lx:478,ly:224,lz:40,x:0,y:0,z:80},{name:"AAU第六层",lx:478,ly:224,lz:40,x:0,y:0,z:120},{name:"AKE第一层",lx:156,ly:154,lz:10,x:0,y:0,z:0},{name:"AKE第二层",lx:164,ly:154,lz:20,x:0,y:0,z:10},{name:"AKE第三层",lx:180,ly:154,lz:20,x:0,y:0,z:30},{name:"AKE第四层",lx:200,ly:154,lz:30,x:0,y:0,z:50},{name:"AKE第五层",lx:200,ly:154,lz:40,x:0,y:0,z:80},{name:"AKE第六层",lx:200,ly:154,lz:40,x:0,y:0,z:120},{name:"AMF第一层",lx:318,ly:244,lz:10,x:45,y:0,z:0},{name:"AMF第二层",lx:336,ly:244,lz:20,x:36,y:0,z:10},{name:"AMF第三层",lx:372,ly:244,lz:20,x:18,y:0,z:30},{name:"AMF第四层",lx:408,ly:244,lz:30,x:0,y:0,z:50},{name:"AMF第五层",lx:408,ly:244,lz:40,x:0,y:0,z:80},{name:"AMF第六层",lx:408,ly:244,lz:40,x:0,y:0,z:120}]}}}),G={class:"dialog",style:{position:"relative",display:"flex","flex-direction":"row"}},L={class:"td-container",style:{"flex-direction":"column","max-width":"90%","max-height":"90%",width:"500px",height:"500px",position:"relative"}},R={class:"form-container"},W={class:"dialog-footer"},y="140px",Y=S({__name:"modulestorehouse",setup(s){const r=q(),z=_(!1),b=_(!1),w=_(-1),M=_("新增模块信息"),l=B({name:"默认模块",lx:1,ly:1,lz:1,x:1,y:1,z:1}),A=()=>{const{lx:n,ly:e,lz:i,x:d,y:x,z:m}=l;z.value=[n,e,i,d,x,m].every(u=>typeof u=="number"),z.value&&(g.emit("showBoxes",[new D([n,e,i],[d,x,m],0,"#FFFFE0",!0,.5,!1,"corner")]),g.emit("centerOfGravityPosition",[d+n/2,x+e/2,m+i/2]),g.emit("showModules",[new J([n,e,i],[d,x,m],"#FFFFE0",!0,0,!0,"corner")]))};K(l,()=>{A()},{immediate:!1}),r.$subscribe((n,e)=>{localStorage.setItem("Module_list",JSON.stringify(e.Module_list))});const F=n=>{p({message:`模块 ${r.Module_list[n].name} 信息删除成功`}),r.Module_list.splice(n,1)},v=n=>{if(w.value=n,n!==-1){M.value="修改模块信息";const e=r.Module_list[n];l.name=e.name,l.lx=e.lx,l.ly=e.ly,l.lz=e.lz,l.x=e.x,l.y=e.y,l.z=e.z}else M.value="新增模块信息",l.name="默认模块",l.lx=1,l.ly=1,l.lz=1,l.x=1,l.y=1,l.z=1;b.value=!0,I(()=>{setTimeout(()=>{A()},100)})},U=()=>{w.value!==-1?(r.Module_list[w.value]={...l},p({message:`模块 ${l.name} 信息修改成功`})):(r.add_Module({...l}),p({message:`模块 ${l.name} 信息添加成功`})),b.value=!1};return(n,e)=>{const i=f("el-table-column"),d=f("el-button"),x=f("el-table"),m=f("el-input"),u=f("el-form-item"),$=f("el-form"),k=f("el-dialog");return P(),N(T,null,[t(x,{data:O(r).Module_list,style:{width:"100%"},height:"95%"},{default:a(()=>[t(i,{prop:"name",label:"模块名称",width:"auto"}),t(i,{prop:"lx",label:"长",width:"auto"}),t(i,{prop:"ly",label:"宽",width:"auto"}),t(i,{prop:"lz",label:"高",width:"auto"}),t(i,{prop:"x",label:"x",width:"auto"}),t(i,{prop:"y",label:"y",width:"auto"}),t(i,{prop:"z",label:"z",width:"auto"}),t(i,{fixed:"right",label:"Operations",width:"auto"},{default:a(o=>[t(d,{type:"primary",class:"fa-regular fa-pen",onClick:h(C=>v(o.$index),["prevent"]),circle:""},null,8,["onClick"]),t(d,{type:"danger",class:"fa-solid fa-trash",onClick:h(C=>F(o.$index),["prevent"]),circle:""},null,8,["onClick"])]),_:1})]),_:1},8,["data"]),t(d,{class:"mt-4",style:{width:"100%"},onClick:e[0]||(e[0]=o=>v(-1))},{default:a(()=>e[10]||(e[10]=[V(" 新增模块 ")])),_:1}),t(k,{modelValue:b.value,"onUpdate:modelValue":e[9]||(e[9]=o=>b.value=o),title:M.value,width:"500"},{default:a(()=>[c("div",G,[c("div",L,[t(j)]),c("div",R,[t($,{model:l},{default:a(()=>[t(u,{label:"模块名称","label-width":y},{default:a(()=>[t(m,{modelValue:l.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(u,{label:"长","label-width":y},{default:a(()=>[t(m,{modelValue:l.lx,"onUpdate:modelValue":e[2]||(e[2]=o=>l.lx=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(u,{label:"宽","label-width":y},{default:a(()=>[t(m,{modelValue:l.ly,"onUpdate:modelValue":e[3]||(e[3]=o=>l.ly=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(u,{label:"高","label-width":y},{default:a(()=>[t(m,{modelValue:l.lz,"onUpdate:modelValue":e[4]||(e[4]=o=>l.lz=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(u,{label:"x","label-width":y},{default:a(()=>[t(m,{modelValue:l.x,"onUpdate:modelValue":e[5]||(e[5]=o=>l.x=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(u,{label:"y","label-width":y},{default:a(()=>[t(m,{modelValue:l.y,"onUpdate:modelValue":e[6]||(e[6]=o=>l.y=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(u,{label:"z","label-width":y},{default:a(()=>[t(m,{modelValue:l.z,"onUpdate:modelValue":e[7]||(e[7]=o=>l.z=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),c("div",W,[t(d,{onClick:e[8]||(e[8]=o=>b.value=!1)},{default:a(()=>e[11]||(e[11]=[V("取消")])),_:1}),t(d,{type:"primary",onClick:U},{default:a(()=>e[12]||(e[12]=[V("确定")])),_:1})])])])]),_:1},8,["modelValue","title"])],64)}}});export{Y as default};
