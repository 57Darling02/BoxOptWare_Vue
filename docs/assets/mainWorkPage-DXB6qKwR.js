import{u as Y}from"./Container-DivQN2Cy.js";import{_ as Z,c as ee}from"./trs3d.vue_vue_type_script_setup_true_lang-3dZdX1Z0.js";import"./trs3d.vue_vue_type_style_index_0_lang-D7gnPIi1.js";import{d as le,B as P,r as g,y as T,q as S,j as t,m as n,b as l,c as i,s as W,a as r,F as z,p as A,e as _,h as f,t as w,E as oe,l as F,o as u,_ as te}from"./index-8HLPoPAF.js";import{u as ae}from"./Box-C-NYVDCp.js";const se={key:0,class:"show"},ne={class:"boxstep"},ue={key:1,class:"show"},ie={class:"containerstep"},de={key:2,class:"show"},re={class:"carbox"},ce={class:"carbox"},_e={key:3,class:"show"},me={class:"sidebarbox"},pe={key:0,class:"sidebarbox"},ve={key:1,class:"sidebarbox"},fe={key:2,class:"sidebarbox"},be={key:3,class:"sidebarbox"},he={style:{padding:"12px","border-top":"1px solid var(--el-border-color)"}},ge=le({__name:"mainWorkPage",setup(xe){const j=Y(),{container_list:V}=P(j),o=g(0),q=()=>{const a=oe.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});if(++o.value>3){o.value=3,a.close();return}o.value==0||o.value==1?console.log(o.value):o.value==2?(console.log(o.value),$()):o.value==3&&ee(k),a.close()},D=()=>{if(--o.value<0){o.value=0;return}},I=ae(),{Box_list:m}=P(I),C=g(!1),x=g(!1),d=g([]),y=g([]);T(d,a=>{a.length===0?(C.value=!1,x.value=!1):a.length===m.value.length?(C.value=!0,x.value=!1):x.value=!0,y.value=new Array(a.length).fill(1),console.log("Selected  goods:",d.value)});const R=a=>{x.value=!1,a?(d.value=m.value.map((e,b)=>b),console.log("All  goods selected")):(d.value=[],console.log("All  goods deselected"))},p=g(0);T(p,a=>{console.log("@@@@",a)});let k={containers:[],boxes:[],num_list:[]};function $(){if(d.value.length<=0){F({message:"请选择货物"}),o.value=0;return}else if(d.value.length!==y.value.length){F({message:"货物数量异常"}),o.value=0;return}else if(p.value<0||p.value>=V.value.length){F({message:"请选择集装箱"}),o.value=1;return}const a=V.value[p.value],e=a.module;e.length==0&&e.push({lx:a.lx,ly:a.ly,lz:a.lz,name:a.name,x:0,y:0,z:0}),console.log("module",e),k={containers:e,boxes:[],num_list:y.value};for(const b of d.value){const h=m.value[b];k.boxes.push({lx:h.lx,ly:h.ly,lz:h.lz,id:b})}}return(a,e)=>{const b=n("el-checkbox"),h=n("el-option"),N=n("el-select"),G=n("el-input-number"),v=n("el-table-column"),H=n("el-table"),J=n("el-main"),U=n("el-container"),B=n("el-step"),K=n("el-steps"),M=n("el-scrollbar"),E=n("el-button"),L=n("el-col"),O=n("el-row"),Q=n("el-aside");return u(),S(U,{class:"layout-container",style:{height:"100%"}},{default:t(()=>[l(U,null,{default:t(()=>[l(J,null,{default:t(()=>[o.value==0?(u(),i("div",se,[e[4]||(e[4]=r("h1",null,"- 选择货物种类",-1)),l(N,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),multiple:"",clearable:"","collapse-tags":"",placeholder:"Select goods","popper-class":"custom-header","max-collapse-tags":1,style:{width:"240px"}},{header:t(()=>[l(b,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=s=>C.value=s),indeterminate:x.value,onChange:R},{default:t(()=>e[3]||(e[3]=[f(" 全选 ")])),_:1},8,["modelValue","indeterminate"])]),default:t(()=>[(u(!0),i(z,null,A(_(m),(s,c)=>(u(),S(h,{key:c,label:s.name,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[5]||(e[5]=r("h1",null,"- 选择货物数量",-1)),(u(!0),i(z,null,A(d.value,(s,c)=>(u(),i("div",ne,[f(" 货物 "+w(_(m)[s].name)+" 数量为 ",1),l(G,{min:1,modelValue:y.value[c],"onUpdate:modelValue":X=>y.value[c]=X},null,8,["modelValue","onUpdate:modelValue"])]))),256))])):o.value==1?(u(),i("div",ue,[e[6]||(e[6]=r("h1",null,"- 选择集装箱",-1)),r("div",ie,[l(N,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),placeholder:"Select",size:"large",style:{width:"240px"}},{default:t(()=>[(u(!0),i(z,null,A(_(V),(s,c)=>(u(),S(h,{key:s.name,label:s.name,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):o.value==2?(u(),i("div",de,[e[8]||(e[8]=r("h2",null,"最终确认",-1)),r("div",re," 集装箱："+w(_(V)[p.value].name),1),r("div",ce,[e[7]||(e[7]=r("h3",null,"货物清单",-1)),l(H,{data:_(k).boxes,stripe:"",style:{width:"100%"}},{default:t(()=>[l(v,{prop:"id",label:"编号",width:"auto"}),l(v,{label:"货物名称",width:"auto"},{default:t(({row:s})=>[f(w(_(m)[s.id].name),1)]),_:1}),l(v,{prop:"lx",label:"长",width:"auto"}),l(v,{prop:"ly",label:"宽",width:"auto"}),l(v,{prop:"lz",label:"高",width:"auto"}),l(v,{label:"数量",width:"auto"},{default:t(({row:s,$index:c})=>[f(w(_(k).num_list[c]),1)]),_:1}),l(v,{label:"货物质量",width:"auto"},{default:t(({row:s})=>[f(w(_(m)[s.id].mass),1)]),_:1})]),_:1},8,["data"])])])):o.value==3?(u(),i("div",_e,[l(Z)])):W("",!0)]),_:1})]),_:1}),l(Q,{"max-width":"25%",style:{display:"flex","flex-direction":"column"}},{default:t(()=>[l(M,null,{default:t(()=>[r("div",me,[l(K,{style:{"max-width":"600px"},active:o.value,"finish-status":"success","align-center":""},{default:t(()=>[l(B),l(B),l(B)]),_:1},8,["active"])]),o.value==0?(u(),i("div",pe," - 选择货物种类及数量 ")):o.value==1?(u(),i("div",ve," - 选择集装箱 ")):o.value==2?(u(),i("div",fe," - 根据货物和集装箱类型分配模块 ")):o.value==3?(u(),i("div",be," - 结果分析和可视化 ")):W("",!0)]),_:1}),r("div",he,[l(O,{gutter:20,align:"middle"},{default:t(()=>[l(L,{span:8},{default:t(()=>[l(E,{type:"primary",plain:"",onClick:D,style:{width:"100%"}},{default:t(()=>e[9]||(e[9]=[f(" 上一步 ")])),_:1})]),_:1}),l(L,{span:16},{default:t(()=>[l(E,{type:"primary",plain:"",onClick:q,style:{width:"100%"}},{default:t(()=>e[10]||(e[10]=[f(" 下一步 ")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})}}}),Be=te(ge,[["__scopeId","data-v-305db4a5"]]);export{Be as default};
