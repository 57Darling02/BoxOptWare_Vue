import{z as C,E as p,d as E,r as w,f as k,x as S,c as K,b as t,j as a,e as N,l as f,F as O,y as h,h as A,a as V,o as P}from"./index-jkkJnLf8.js";import{_ as B,b as I,m as D}from"./trs3d.vue_vue_type_script_setup_true_lang-Cfw-Y_vq.js";import{e as J}from"./trs3d.vue_vue_type_style_index_0_lang-D7gnPIi1.js";const T=C("ModuleStore",{actions:{add_Module(d){const u=["name","lx","ly","lz","x","y","z"];for(const x of u)if(!d.hasOwnProperty(x)){p({title:"error",message:`输入对象缺少 ${x} 属性`});return}if(typeof d.name!="string"){p({title:"error",message:"name 属性必须是字符串类型"});return}if(typeof d.lx!="number"||typeof d.ly!="number"||typeof d.lz!="number"||typeof d.x!="number"||typeof d.y!="number"||typeof d.z!="number"){p({title:"error",message:"lx, ly, lz 和 xyz 属性必须是数字类型"});return}this.Module_list.push(d),p({message:`模块${d.name}信息添加成功`})}},state(){return{Module_list:JSON.parse(localStorage.getItem("Module_list"))||[{name:"AAU第一层",lx:318,ly:224,lz:10,x:80,y:0,z:0},{name:"AAU第二层",lx:338,ly:224,lz:20,x:70,y:0,z:10},{name:"AAU第三层",lx:378,ly:224,lz:20,x:50,y:0,z:30},{name:"AAU第四层",lx:418,ly:224,lz:30,x:30,y:0,z:50},{name:"AAU第五层",lx:478,ly:224,lz:40,x:0,y:0,z:80},{name:"AAU第六层",lx:478,ly:224,lz:40,x:0,y:0,z:120},{name:"AKE第一层",lx:156,ly:154,lz:10,x:0,y:0,z:0},{name:"AKE第二层",lx:164,ly:154,lz:20,x:0,y:0,z:10},{name:"AKE第三层",lx:180,ly:154,lz:20,x:0,y:0,z:30},{name:"AKE第四层",lx:200,ly:154,lz:30,x:0,y:0,z:50},{name:"AKE第五层",lx:200,ly:154,lz:40,x:0,y:0,z:80},{name:"AKE第六层",lx:200,ly:154,lz:40,x:0,y:0,z:120},{name:"AMF第一层",lx:318,ly:244,lz:10,x:45,y:0,z:0},{name:"AMF第二层",lx:336,ly:244,lz:20,x:36,y:0,z:10},{name:"AMF第三层",lx:372,ly:244,lz:20,x:18,y:0,z:30},{name:"AMF第四层",lx:408,ly:244,lz:30,x:0,y:0,z:50},{name:"AMF第五层",lx:408,ly:244,lz:40,x:0,y:0,z:80},{name:"AMF第六层",lx:408,ly:244,lz:40,x:0,y:0,z:120}]}}}),j={class:"dialog",style:{position:"relative",display:"flex","flex-direction":"row"}},q={class:"td-container",style:{"flex-direction":"column","max-width":"90%","max-height":"90%",width:"500px",height:"500px",position:"relative"}},L={class:"form-container"},R={class:"dialog-footer"},y="140px",Q=E({__name:"modulestorehouse",setup(d){const u=T(),x=w(!1),z=w(!1),M=w(-1),g=w("新增模块信息"),l=k({name:"默认模块",lx:1,ly:1,lz:1,x:1,y:1,z:1});S(l,(s,e)=>{const{lx:n,ly:r,lz:b,x:i,y:m,z:_}=s;if(x.value=[n,r,b,i,m,_].every(c=>typeof c=="number"),x.value){const c={main_containers:[],module_containers:[new D([n,r,b],[i,m,_],void 0,void 0,void 0,void 0,"center")],boxes:[new I([n,r,b],[i,m,_],0,"#FFFFE0",!0,.5,!1,"center")]};J.emit("update-showParams",c)}},{immediate:!0}),u.$subscribe((s,e)=>{localStorage.setItem("Module_list",JSON.stringify(e.Module_list))});const F=s=>{p({message:`模块 ${u.Module_list[s].name} 信息删除成功`}),u.Module_list.splice(s,1)},v=s=>{if(M.value=s,s!==-1){g.value="修改模块信息";const e=u.Module_list[s];l.name=e.name,l.lx=e.lx,l.ly=e.ly,l.lz=e.lz,l.x=e.x,l.y=e.y,l.z=e.z}else g.value="新增模块信息",l.name="默认模块",l.lx=1,l.ly=1,l.lz=1,l.x=1,l.y=1,l.z=1;z.value=!0},U=()=>{M.value!==-1?(u.Module_list[M.value]={...l},p({message:`模块 ${l.name} 信息修改成功`})):(u.add_Module({...l}),p({message:`模块 ${l.name} 信息添加成功`})),z.value=!1};return(s,e)=>{const n=f("el-table-column"),r=f("el-button"),b=f("el-table"),i=f("el-input"),m=f("el-form-item"),_=f("el-form"),c=f("el-dialog");return P(),K(O,null,[t(b,{data:N(u).Module_list,style:{width:"100%"},height:"95%"},{default:a(()=>[t(n,{prop:"name",label:"模块名称",width:"auto"}),t(n,{prop:"lx",label:"长",width:"auto"}),t(n,{prop:"ly",label:"宽",width:"auto"}),t(n,{prop:"lz",label:"高",width:"auto"}),t(n,{prop:"x",label:"x",width:"auto"}),t(n,{prop:"y",label:"y",width:"auto"}),t(n,{prop:"z",label:"z",width:"auto"}),t(n,{fixed:"right",label:"Operations",width:"auto"},{default:a(o=>[t(r,{type:"primary",class:"fa-regular fa-pen",onClick:h($=>v(o.$index),["prevent"]),circle:""},null,8,["onClick"]),t(r,{type:"danger",class:"fa-solid fa-trash",onClick:h($=>F(o.$index),["prevent"]),circle:""},null,8,["onClick"])]),_:1})]),_:1},8,["data"]),t(r,{class:"mt-4",style:{width:"100%"},onClick:e[0]||(e[0]=o=>v(-1))},{default:a(()=>e[10]||(e[10]=[A(" 新增模块 ")])),_:1}),t(c,{modelValue:z.value,"onUpdate:modelValue":e[9]||(e[9]=o=>z.value=o),title:g.value,width:"500"},{default:a(()=>[V("div",j,[V("div",q,[t(B)]),V("div",L,[t(_,{model:l},{default:a(()=>[t(m,{label:"模块名称","label-width":y},{default:a(()=>[t(i,{modelValue:l.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(m,{label:"长","label-width":y},{default:a(()=>[t(i,{modelValue:l.lx,"onUpdate:modelValue":e[2]||(e[2]=o=>l.lx=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(m,{label:"宽","label-width":y},{default:a(()=>[t(i,{modelValue:l.ly,"onUpdate:modelValue":e[3]||(e[3]=o=>l.ly=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(m,{label:"高","label-width":y},{default:a(()=>[t(i,{modelValue:l.lz,"onUpdate:modelValue":e[4]||(e[4]=o=>l.lz=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(m,{label:"x","label-width":y},{default:a(()=>[t(i,{modelValue:l.x,"onUpdate:modelValue":e[5]||(e[5]=o=>l.x=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(m,{label:"y","label-width":y},{default:a(()=>[t(i,{modelValue:l.y,"onUpdate:modelValue":e[6]||(e[6]=o=>l.y=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(m,{label:"z","label-width":y},{default:a(()=>[t(i,{modelValue:l.z,"onUpdate:modelValue":e[7]||(e[7]=o=>l.z=o),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),V("div",R,[t(r,{onClick:e[8]||(e[8]=o=>z.value=!1)},{default:a(()=>e[11]||(e[11]=[A("取消")])),_:1}),t(r,{type:"primary",onClick:U},{default:a(()=>e[12]||(e[12]=[A("确定")])),_:1})])])])]),_:1},8,["modelValue","title"])],64)}}});export{Q as default};
