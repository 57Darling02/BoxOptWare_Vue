import{u as M}from"./Container-D2yS-drq.js";import{_ as O,c as Q}from"./trs3d.vue_vue_type_script_setup_true_lang-Cfw-Y_vq.js";import"./trs3d.vue_vue_type_style_index_0_lang-D7gnPIi1.js";import{d as X,A as U,r as f,x as E,p as w,j as a,l as n,b as o,c as i,q as L,a as d,F as C,m as B,e as S,h as y,B as Y,E as z,o as s,t as Z,_ as ee}from"./index-jkkJnLf8.js";import{u as le}from"./Box-CfKsJehU.js";const oe={key:0,class:"show"},te={class:"boxstep"},ae={key:1,class:"show"},se={class:"containerstep"},ne={key:2,class:"show"},ue={key:3,class:"show"},ie={class:"sidebarbox"},re={key:0,class:"sidebarbox"},ce={key:1,class:"sidebarbox"},de={key:2,class:"sidebarbox"},me={key:3,class:"sidebarbox"},_e={style:{padding:"12px","border-top":"1px solid var(--el-border-color)"}},ve=X({__name:"mainWorkPage",setup(pe){const P=M(),{container_list:k}=U(P),l=f(0),T=()=>{const t=Y.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"});if(++l.value>3){l.value=3,t.close();return}l.value==0||l.value==1||l.value==2?console.log(l.value):l.value==3&&D(),t.close()},W=()=>{if(--l.value<0){l.value=0;return}},j=le(),{Box_list:g}=U(j),b=f(!1),h=f(!1),r=f([]),x=f([]);E(r,t=>{t.length===0?(b.value=!1,h.value=!1):t.length===g.value.length?(b.value=!0,h.value=!1):h.value=!0,x.value=new Array(t.length).fill(1),console.log("Selected  goods:",r.value)});const q=t=>{h.value=!1,t?(r.value=g.value.map((e,_)=>_),console.log("All  goods selected")):(r.value=[],console.log("All  goods deselected"))},m=f(0);E(m,t=>{console.log("@@@@",t)});function D(){if(r.value.length<=0){z({message:"请选择货物"}),l.value=0;return}else if(r.value.length!==x.value.length){z({message:"货物数量异常"}),l.value=0;return}else if(m.value<0||m.value>=k.value.length){z({message:"请选择容器"}),l.value=1;return}const t=k.value[m.value],e=t.module;e.length==0&&e.push({lx:t.lx,ly:t.ly,lz:t.lz,name:t.name,x:0,y:0,z:0}),console.log("module",e);const _={containers:e,boxes:[],num_list:x.value};for(const v of r.value){console.log("hhhh",v);const p=g.value[v];_.boxes.push({lx:p.lx,ly:p.ly,lz:p.lz,id:v})}Q(_)}return(t,e)=>{const _=n("el-checkbox"),v=n("el-option"),p=n("el-select"),I=n("el-input-number"),R=n("el-main"),A=n("el-container"),V=n("el-step"),$=n("el-steps"),G=n("el-scrollbar"),F=n("el-button"),N=n("el-col"),H=n("el-row"),J=n("el-aside");return s(),w(A,{class:"layout-container",style:{height:"100%"}},{default:a(()=>[o(A,null,{default:a(()=>[o(R,null,{default:a(()=>[l.value==0?(s(),i("div",oe,[e[4]||(e[4]=d("h1",null,"- 选择货物种类",-1)),o(p,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=u=>r.value=u),multiple:"",clearable:"","collapse-tags":"",placeholder:"Select goods","popper-class":"custom-header","max-collapse-tags":1,style:{width:"240px"}},{header:a(()=>[o(_,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=u=>b.value=u),indeterminate:h.value,onChange:q},{default:a(()=>e[3]||(e[3]=[y(" 全选 ")])),_:1},8,["modelValue","indeterminate"])]),default:a(()=>[(s(!0),i(C,null,B(S(g),(u,c)=>(s(),w(v,{key:c,label:u.name,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[5]||(e[5]=d("h1",null,"- 选择货物数量",-1)),(s(!0),i(C,null,B(r.value,(u,c)=>(s(),i("div",te,[y(" 货物 "+Z(S(g)[u].name)+" 数量为 ",1),o(I,{min:1,modelValue:x.value[c],"onUpdate:modelValue":K=>x.value[c]=K},null,8,["modelValue","onUpdate:modelValue"])]))),256))])):l.value==1?(s(),i("div",ae,[e[6]||(e[6]=d("h1",null,"- 选择集装箱",-1)),d("div",se,[o(p,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=u=>m.value=u),placeholder:"Select",size:"large",style:{width:"240px"}},{default:a(()=>[(s(!0),i(C,null,B(S(k),(u,c)=>(s(),w(v,{key:u.name,label:u.name,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):l.value==2?(s(),i("div",ne,e[7]||(e[7]=[d("h1",null,"最终确认",-1)]))):l.value==3?(s(),i("div",ue,[o(O)])):L("",!0)]),_:1})]),_:1}),o(J,{"max-width":"25%",style:{display:"flex","flex-direction":"column"}},{default:a(()=>[o(G,null,{default:a(()=>[d("div",ie,[o($,{style:{"max-width":"600px"},active:l.value,"finish-status":"success","align-center":""},{default:a(()=>[o(V),o(V),o(V)]),_:1},8,["active"])]),l.value==0?(s(),i("div",re," - 选择货物种类及数量 ")):l.value==1?(s(),i("div",ce," - 选择集装箱 ")):l.value==2?(s(),i("div",de," - 根据货物和集装箱类型分配模块 ")):l.value==3?(s(),i("div",me," - 结果分析和可视化 ")):L("",!0)]),_:1}),d("div",_e,[o(H,{gutter:20,align:"middle"},{default:a(()=>[o(N,{span:8},{default:a(()=>[o(F,{type:"primary",plain:"",onClick:W,style:{width:"100%"}},{default:a(()=>e[8]||(e[8]=[y(" 上一步 ")])),_:1})]),_:1}),o(N,{span:16},{default:a(()=>[o(F,{type:"primary",plain:"",onClick:T,style:{width:"100%"}},{default:a(()=>e[9]||(e[9]=[y(" 下一步 ")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})}}}),ye=ee(ve,[["__scopeId","data-v-4318ef14"]]);export{ye as default};
